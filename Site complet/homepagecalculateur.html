<!DOCTYPE html>
<html lang="fr">
<head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-4H5ZLXRGTG"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-4H5ZLXRGTG');
</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Master Your Metrics</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f9f9f9;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 100vh;
        }

        .header {
            background-color: #34495e;
            color: white;
            padding: 15px;
            text-align: center;
            width: 100%;
        }

        .header h1 {
            font-size: 2em;
            margin: 0;
        }

        .container {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            max-width: 1200px;
            margin-top: 10px;
        }

        .scorecard {
            background-color: white;
            border: 1px solid #ccc;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            width: 200px;
            margin: 10px;
            transition: transform 0.3s ease;
        }

        .scorecard:hover {
            transform: scale(1.05);
        }

        .scorecard h2 {
            color: #2c3e50;
            font-size: 18px;
        }

        .scorecard .stars {
            font-size: 18px;
            color: gold;
            margin-top: 10px;
        }

        .btn-calculate {
            background-color: #27ae60;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            font-size: 18px;
            cursor: pointer;
            margin-top: 20px;
        }

        .btn-contact {
            display: none;
            background-color: #3498db;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            font-size: 18px;
            cursor: pointer;
            margin-top: 20px;
        }

        .footer {
            margin-top: 20px;
            text-align: center;
            width: 100%;
            font-size: 14px;
            color: #34495e;
        }

        #radarChartContainer {
            max-width: 400px;
            margin: 20px auto;
        }

        .conclusion {
            font-size: 14px;
            font-style: italic;
            line-height: 1.6;
            color: #2c3e50;
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
            background-color: #f9f9f9;
            border-left: 4px solid #27ae60;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            width: 400px;
            text-align: center;
        }

        .modal-content input, .modal-content textarea {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        .modal-content button {
            padding: 10px 20px;
            background-color: #27ae60;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

    <div class="header">
        <h1>Master Your Metrics</h1>
        <p>Portail de Diagnostic - Évaluation Globale</p>
    </div>

    <div class="container">
        <div class="scorecard">
            <h2>ESG</h2>
            <div class="stars" id="stars1">⭐⭐⭐⭐⭐</div>
            <a href="esg/ESG.html">Accéder</a>
        </div>

        <div class="scorecard">
            <h2>Anti-Blanchiment</h2>
            <div class="stars" id="stars2">⭐⭐⭐⭐⭐</div>
            <a href="AML/homepagequestionnaire.html">Accéder</a>
        </div>

        <div class="scorecard">
            <h2>Digitalisation</h2>
            <div class="stars" id="stars3">⭐⭐⭐⭐⭐</div>
            <a href="Digital/homepagescorecarddigitalisation.html">Accéder</a>
        </div>

        <div class="scorecard">
            <h2>Crédit</h2>
            <div class="stars" id="stars4">⭐⭐⭐⭐⭐</div>
            <a href="Credit/homepagecredit.html">Accéder</a>
        </div>

        <div class="scorecard">
            <h2>Cybersécurité</h2>
            <div class="stars" id="stars5">⭐⭐⭐⭐⭐</div>
            <a href="CyberSecurity/homepagesecurity.html">Accéder</a>
        </div>
    </div>

    <button class="btn-calculate" onclick="calculateAndDisplay()">Calculer le score global</button>

    <div class="conclusion" id="conclusionText"></div>

    <button class="btn-contact" id="btnContact" onclick="openModal()">Prendre contact</button>

    <div id="radarChartContainer">
        <canvas id="radarChart"></canvas>
    </div>

    <div class="modal" id="contactModal">
        <div class="modal-content">
            <h3>Informations supplémentaires</h3>
            <input type="text" id="companyNumber" placeholder="Numéro d'entreprise" required>
            <input type="text" id="companyLeaders" placeholder="Noms des dirigeants" required>
            <input type="date" id="creationDate" placeholder="Date de constitution" required>
            <textarea id="additionalComment" placeholder="Commentaire personnalisé"></textarea>
            <button onclick="sendEmail()">Envoyer</button>
        </div>
    </div>

    <div class="footer">
        <p>&copy; 2024 Portail de Diagnostic</p>
    </div>

    <script>
        let conclusionText = "";

        function loadScores() {
            const stars1 = Math.floor(localStorage.getItem("scoreESG") / 8) || 0;
            const stars2 = Math.floor(localStorage.getItem("scoreAML") / 8) || 0;
            const stars3 = Math.floor(localStorage.getItem("scoreDigital") / 8) || 0;
            const stars4 = Math.floor(localStorage.getItem("scoreCredit") / 8) || 0;
            const stars5 = Math.floor(localStorage.getItem("scoreCybersecurity") / 8) || 0;

            document.getElementById("stars1").textContent = getStars(stars1);
            document.getElementById("stars2").textContent = getStars(stars2);
            document.getElementById("stars3").textContent = getStars(stars3);
            document.getElementById("stars4").textContent = getStars(stars4);
            document.getElementById("stars5").textContent = getStars(stars5);
        }

        function getStars(starCount) {
            return "⭐⭐⭐⭐⭐".slice(0, starCount) + "☆☆☆☆☆".slice(starCount);
        }

        function calculateAndDisplay() {
            const scoreESG = parseFloat(localStorage.getItem("scoreESG")) || 0;
            const scoreAML = parseFloat(localStorage.getItem("scoreAML")) || 0;
            const scoreDigital = parseFloat(localStorage.getItem("scoreDigital")) || 0;
            const scoreCredit = parseFloat(localStorage.getItem("scoreCredit")) || 0;
            const scoreCyber = parseFloat(localStorage.getItem("scoreCybersecurity")) || 0;

            const totalScore = scoreESG + scoreAML + scoreDigital + scoreCredit + scoreCyber;
            const avgScore = totalScore / 5;

            conclusionText = `Votre évaluation globale donne un score moyen de ${avgScore.toFixed(1)}/100. 
            Cette performance met en lumière des axes forts et des points d’amélioration. 
            Grâce à notre expertise, nous pouvons vous accompagner dans le renforcement des piliers ESG, 
            l’amélioration des pratiques anti-blanchiment, la digitalisation, le crédit et la cybersécurité, 
            pour une gouvernance plus résiliente et durable.`;

            document.getElementById("conclusionText").textContent = conclusionText;

            const ctx = document.getElementById("radarChart").getContext("2d");
            new Chart(ctx, {
                type: "radar",
                data: {
                    labels: ["ESG", "Anti-Blanchiment", "Digitalisation", "Crédit", "Cybersécurité"],
                    datasets: [{
                        label: "Scores ESG",
                        data: [scoreESG, scoreAML, scoreDigital, scoreCredit, scoreCyber],
                        backgroundColor: "rgba(39, 174, 96, 0.4)",
                        borderColor: "#27ae60",
                        borderWidth: 1
                    }]
                },
                options: {
                    scales: {
                        r: {
                            beginAtZero: true,
                            max: 100
                        }
                    }
                }
            });

            document.getElementById("btnContact").style.display = "block";
        }

        function openModal() {
            document.getElementById("contactModal").style.display = "flex";
        }

        function sendEmail() {
            const companyNumber = document.getElementById("companyNumber").value;
            const companyLeaders = document.getElementById("companyLeaders").value;
            const creationDate = document.getElementById("creationDate").value;
            const additionalComment = document.getElementById("additionalComment").value;

            const scores = {
                ESG: getStars(Math.floor(localStorage.getItem("scoreESG") / 8) || 0),
                "Anti-Blanchiment": getStars(Math.floor(localStorage.getItem("scoreAML") / 8) || 0),
                Digitalisation: getStars(Math.floor(localStorage.getItem("scoreDigital") / 8) || 0),
                Crédit: getStars(Math.floor(localStorage.getItem("scoreCredit") / 8) || 0),
                Cybersécurité: getStars(Math.floor(localStorage.getItem("scoreCybersecurity") / 8) || 0)
            };

            const scoreSummary = `Scores par calculateur:\n- ESG: ${scores.ESG}\n- Anti-Blanchiment: ${scores["Anti-Blanchiment"]}\n- Digitalisation: ${scores.Digitalisation}\n- Crédit: ${scores.Crédit}\n- Cybersécurité: ${scores.Cybersécurité}`;

            const mailtoLink = `mailto:cobsstrategy@gmail.com?subject=Diagnostic%20Évaluation&body=Numéro d'entreprise: ${companyNumber}%0ANoms des dirigeants: ${companyLeaders}%0ADate de constitution: ${creationDate}%0ACommentaire: ${additionalComment}%0A%0AConclusion : ${conclusionText}%0A%0A${scoreSummary}`;

            window.location.href = mailtoLink;
            closeModal();
        }

        function closeModal() {
            document.getElementById("contactModal").style.display = "none";
        }

        window.onload = loadScores;
    </script>

</body>
</html>